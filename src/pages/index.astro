---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Testimonials from "../components/Testimonials.astro";
import {
  SITE_TITLE,
  SITE_DESCRIPTION,
  HERO_TITLE,
  HERO_SUBTITLE,
  SLIDER_CONTENT,
} from "../consts";
import HeroImage from "../../public/images/yumkin-hero3.jpg";
import BlogTeaser from "../components/BlogTeaser.astro";

const quotes = await getCollection("quotes");
const posts: BlogPost = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<html lang="de">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header
      title={HERO_TITLE}
      description={HERO_SUBTITLE}
      heroSize="large"
      heroImage={HeroImage}
    />
    <main class="max-w-7xl mx-auto px-6 text-center space-y-24 pt-16">
      <section class="">
        <div class="mb-24">
          <div class="mx-auto max-w-2xl lg:max-w-none text-left lg:text-center">
            <div class="grid grid-cols-1 gap-x-8 gap-y-10 lg:grid-cols-3">
              <div class="flex lg:flex-col justify-center items-center gap-2">
                <img
                  class="size-10 sm:size-12 md:size-14 lg:size-16"
                  src="https://tailwindui.com/plus/img/ecommerce/icons/icon-shipping-simple.svg"
                  alt=""
                />
                <div class="mt-4 sm:ml-6 sm:mt-0 lg:ml-0 lg:mt-6">
                  <h3 class="text-sm font-medium text-gray-900">
                    Free shipping
                  </h3>
                  <p class="mt-2 text-sm text-gray-500">
                    It&#039;s not actually free we just price it into the
                    products. Someone&#039;s paying for it, and it&#039;s not
                    us.
                  </p>
                </div>
              </div>
              <div class="flex lg:flex-col justify-center items-center gap-4">
                <img
                  class="size-10 sm:size-12 md:size-14 lg:size-16"
                  src="https://tailwindui.com/plus/img/ecommerce/icons/icon-warranty-simple.svg"
                  alt=""
                />
                <div class="mt-4 sm:ml-6 sm:mt-0 lg:ml-0 lg:mt-6">
                  <h3 class="text-sm font-medium text-gray-900">
                    10-year warranty
                  </h3>
                  <p class="mt-2 text-sm text-gray-500">
                    If it breaks in the first 10 years we&#039;ll replace it.
                    After that you&#039;re on your own though.
                  </p>
                </div>
              </div>
              <div class="flex lg:flex-col justify-center items-center gap-4">
                <img
                  class="size-10 sm:size-12 md:size-14 lg:size-16"
                  src="https://tailwindui.com/plus/img/ecommerce/icons/icon-exchange-simple.svg"
                  alt=""
                />
                <div class="mt-4 sm:ml-6 sm:mt-0 lg:ml-0 lg:mt-6">
                  <h3 class="text-sm font-medium text-gray-900">Exchanges</h3>
                  <p class="mt-2 text-sm text-gray-500">
                    If you don&#039;t like it, trade it to one of your friends
                    for something of theirs. Don&#039;t send it here though.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section>
        <header class="mx-auto text-center max-w-3xl">
          <h2
            class="mt-2 text-balance text-4xl font-semibold tracking-tight text-gray-900 sm:text-5xl mb-4"
          >
            Endlich wieder Genuss und Spaß beim Essen.
          </h2>
          <p class="text-lg opacity-70">
            Sag tschüss zu komplizierter Rezeptsuche. Wir helfen mit der
            kulinarischen Alltagsplanung bei Lebensmittelunverträglichkeiten
            oder -Allergien.
          </p>
        </header>

        <div class="bg-white">
          <div class="mx-auto max-w-xl lg:max-w-7xl lg:px-8">
            <div
              class="mt-10 space-y-12 lg:grid sm:lg:grid-cols-2 lg:grid-cols-4 lg:gap-x-8 lg:space-y-0"
            >
              {
                SLIDER_CONTENT.map((slider) => (
                  <div class="group block">
                    <Image
                      class="aspect-[3/2] w-full rounded-lg object-cover group-hover:opacity-75 lg:aspect-[5/6]"
                      src={`${import.meta.env.BASE_URL}images/${slider.content}`}
                      alt=""
                      width={1000}
                      height={800}
                    />
                    <div class="pt-4">
                      <p class="text-lg font-medium tracking-tight text-gray-950 max-lg:text-center">
                        {slider.label}
                      </p>
                      <p class="mt-2 max-w-lg text-sm/6 text-gray-600 max-lg:text-center">
                        {slider.description}
                      </p>
                    </div>
                  </div>
                ))
              }
            </div>
          </div>
        </div>

        <div class="slider grid md:grid-cols-3 items-center my-8 p-6 hidden">
          <div role="list" class="shadow-sm ring-1 ring-gray-100">
            <template x-for="(item, index) in SLIDER_CONTENT" :key="index">
              <div
                class="flex bg-white justify-between gap-x-6 p-4 cursor-pointer border-2 hover:border-brand items-center text-left transition-all group first:rounded-t-lg first:bg-red-400 last:rounded-b-lg"
                x-bind:class="{
                  'bg-gray-50 border-brand': selectedIndex === index,
                  'border-transparent': selectedIndex !== index
                }"
                @click="selectedIndex = index"
              >
                <div><h3 class="font-semibold" x-text="item.label"></h3></div>
                <svg
                  class="size-6 flex-none text-transparent group-hover:text-brand"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"
                    clip-rule="evenodd"></path>
                </svg>
              </div>
            </template>
          </div>

          <div class="slides w-full flex justify-center">
            <template x-for="(item, index) in SLIDER_CONTENT" :key="index">
              <div x-show="selectedIndex === index">
                <img
                  :src="item.content"
                  :alt="item.description"
                  class="max-h-[50vh] rounded-lg"
                />
              </div>
            </template>
          </div>

          <!-- Slide Images -->
          <div class="slides w-full flex justify-center">
            <template x-for="(item, index) in SLIDER_CONTENT" :key="index">
              <div
                x-show="selectedIndex === index"
                class="bg-white p-4 cursor-pointer inset-px rounded-lg"
              >
                <p x-text="item.description"></p>
              </div>
            </template>
          </div>
        </div>
      </section>

      <Testimonials />
      <section>
        <header class="max-w-2xl mx-auto mb-8">
          <h2 class="text-xl md:text-2xl lg:text-3xl mb-4 font-semibold">
            Immer up to date: Wissenswertes, Tipps und Tricks!
          </h2>
          <p class="text-lg opacity-70">
            Entdecke Wissenswertes, Updates und Inspirationen rund um Ernährung
            und unsere App.
          </p>
        </header>
        <div
          class="grid sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 text-left"
        >
          {
            posts.map((post: BlogPost) => (
              <BlogTeaser id={post.id} post={post} />
            ))
          }
        </div>
      </section>

      <Footer />
    </main>
  </body>
</html>
